<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://gatosan.github.io name=base><title>
            
                Data security
            
        </title><meta content="Data security" property=og:title><link href=https://gatosan.github.io/fonts.css rel=stylesheet><script async data-goatcounter=https://gatosan.goatcounter.com/count src=https://gatosan.github.io/js/count.js></script><noscript><img src="https://gatosan.goatcounter.com//count?p=/posts/data-security/&t=Data security"></noscript><script defer src=https://gatosan.github.io/js/toc.js></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']]}}</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link href=https://gatosan.github.io/theme/light.css rel=stylesheet><link href=https://gatosan.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://gatosan.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme())</script><link href=https://gatosan.github.io/main.css media=screen rel=stylesheet><script src="https://gatosan.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=left-content></div><div class=content><nav><div class=left-nav><a href=https://gatosan.github.io>GatoSan Blog</a><div class=socials><a rel="'me'" class=social href=https://github.com/gatosan/> <img alt=github src=https://gatosan.github.io/icons/social/github.svg> </a></div></div><div class=right-nav><a href=https://gatosan.github.io/posts style=margin-right:.5em>/posts</a><a href=https://gatosan.github.io/projects style=margin-right:.5em>/projects</a><a href=https://gatosan.github.io/about style=margin-right:.5em>/about</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://gatosan.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://gatosan.github.io/icons/sun.svg style=filter:invert(1)> <img alt=Dark id=moon-icon src=https://gatosan.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></div></nav><div data-selector="main article p" class=visible-element-observer-root><main><article><div class=title><div class=page-header>Data security</div><div class=meta>Posted on <time>2024-02-29</time></div></div><section class=body><h2 id=format-drive-everything-done>Format drive - everything done?</h2><p>Unfortunately not. As it might seem on first glance that formatting solves the problem of removing data from a drive, it only creates a new partition whereas the data itself remains on the drive. There are many tools out in the field, that are able to recreate the original data from such kind of devices.<p>To overcome this topic, I will show how someone can delete the data in a save way by using different Linux tools.<h2 id=preperation>Preperation</h2><p>Insert the new device (e.g. an USB stick) and check the device.<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>lsblk
</span></code></pre><p>TODO - add info here<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> umount /dev/sda1
</span></code></pre><h2 id=clean-up-the-device>Clean up the device</h2><p>TODO - info<h3 id=use-the-dd-command>Use the dd command</h3><pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> dd if=/dev/zero of=/dev/sda bs=4096 status=progress
</span></code></pre><p>Info - enough for most use-cases. The more secure way comes here:<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> dd if=/dev/urandom of=/dev/sda bs=4096 status=progress
</span></code></pre><p>In both cases -> <em>no space left on device</em> information<h3 id=use-the-shred-command>Use the shred command</h3><p>By default three different runs with random data.<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=font-style:italic;color:#5c6773># basic command
</span><span style=color:#ffb454>sudo</span><span> shred</span><span style=color:#f29718> -v</span><span> /dev/sda
</span><span>
</span><span style=font-style:italic;color:#5c6773># overwrite the storage with zeros in the last run
</span><span style=color:#ffb454>sudo</span><span> shred</span><span style=color:#f29718> -v -z</span><span> /dev/sda
</span><span>
</span><span style=font-style:italic;color:#5c6773># use random information and reduce the number of runs to 2
</span><span style=color:#ffb454>sudo</span><span> shred</span><span style=color:#f29718> -v -z --random-source</span><span style=color:#f29668>=</span><span>/dev/urandom</span><span style=color:#f29718> -n2</span><span> /dev/sda
</span></code></pre><h2 id=create-a-new-partition>Create a new partition</h2><pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> fdisk</span><span style=color:#f29718> -l
</span></code></pre><p>Select the device<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> fdisk /dev/sda
</span></code></pre><p>TODO - show commands in detail<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=color:#ffb454>sudo</span><span> mkfs.vfat</span><span style=color:#f29718> -F</span><span> 32 /dev/sda1
</span></code></pre><h2 id=hiding-data>Hiding data</h2><p>TODO - information<pre class=language-bash data-lang=bash style=background:#0f1419;color:#bfbab0><code class=language-bash data-lang=bash><span style=font-style:italic;color:#5c6773># install the package
</span><span style=color:#ffb454>sudo</span><span> apt update
</span><span style=color:#ffb454>sudo</span><span> apt install steghide
</span><span>
</span><span style=font-style:italic;color:#5c6773># embed a file into an image
</span><span style=color:#ffb454>steghide</span><span> embed</span><span style=color:#f29718> -cf</span><span> myimage.jpg</span><span style=color:#f29718> -ef</span><span> secretfile.txt
</span><span>
</span><span style=font-style:italic;color:#5c6773># get information from the prepared file without extraction
</span><span style=color:#ffb454>steghide</span><span> info myimage.jpg
</span><span>
</span><span style=font-style:italic;color:#5c6773># extract the secret file
</span><span style=color:#ffb454>steghide</span><span> extract</span><span style=color:#f29718> -sf</span><span> myimage.jpg
</span></code></pre></section></article></main></div></div><div class=right-content><div class=toc><div class=heading>Table of Contents</div><ul class=toc-list><li class=parent><a href=https://gatosan.github.io/posts/data-security/#format-drive-everything-done>Format drive - everything done?</a><li class=parent><a href=https://gatosan.github.io/posts/data-security/#preperation>Preperation</a><li class=parent><a href=https://gatosan.github.io/posts/data-security/#clean-up-the-device>Clean up the device</a> <ul><li><a href=https://gatosan.github.io/posts/data-security/#use-the-dd-command>Use the dd command</a><li><a href=https://gatosan.github.io/posts/data-security/#use-the-shred-command>Use the shred command</a></ul><li class=parent><a href=https://gatosan.github.io/posts/data-security/#create-a-new-partition>Create a new partition</a><li class=parent><a href=https://gatosan.github.io/posts/data-security/#hiding-data>Hiding data</a></ul></div></div>